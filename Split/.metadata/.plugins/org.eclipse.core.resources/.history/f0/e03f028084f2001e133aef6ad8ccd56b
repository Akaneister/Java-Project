package model;

import java.util.List;
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        InventoryManager inventoryManager = new InventoryManager();
        Scanner myObj = new Scanner(System.in);

        while (true) {
            System.out.println("__________________________");
            System.out.println("\n 1. Add an item \n 2. View inventory \n 3. Update an item \n 4. Search \n 5. Exit");
            System.out.println("__________________________");
            String rep = myObj.nextLine();

            switch (rep) {
                case "1":
                    do {
                        InventoryItem newItem = InventoryItem.createItemFromInput(myObj);
                        inventoryManager.addInventoryItem(newItem);
                        System.out.println("Item added successfully!");
                        System.out.println("\nDo you want to add another item? (Y/N)");
                        rep = myObj.nextLine();
                    } while (rep.equalsIgnoreCase("Y"));
                    break;
                case "2":
                    System.out.println("Viewing inventory...");
                    printInventory(inventoryManager.viewInventory());
                    break;
                case "3":
                    // Handle update item case
                    System.out.println("Updating an item...");
                    System.out.println("\nEnter the name of the item to update:");
                    String itemName = myObj.nextLine();
                    System.out.println("Enter the category of the item to update:");
                    String itemCategory = myObj.nextLine();
                    
                    // Search for the item to update
                    List<InventoryItem> searchResult = inventoryManager.searchByName(itemName);
                    boolean found = false;
                    for (InventoryItem item : searchResult) {
                        if (item.getCategory().equalsIgnoreCase(itemCategory)) {
                            found = true;
                            System.out.println("Item found:");
                            System.out.println("Name: " + item.getName());
                            System.out.println("Category: " + item.getCategory());
                            System.out.println("Price: $" + item.getPrice());
                            System.out.println("Quantity: " + item.getQuantity());
                            System.out.println("Enter new details for the item:");
                            System.out.println("New name:");
                            String newName = myObj.nextLine();
                            System.out.println("New category:");
                            String newCategory = myObj.nextLine();
                            System.out.println("New price:");
                            double newPrice = Double.parseDouble(myObj.nextLine());
                            System.out.println("New quantity:");
                            int newQuantity = Integer.parseInt(myObj.nextLine());
                            
                            // Update the item
                            inventoryManager.updateInventoryItem(itemName, itemCategory, newName, newCategory, newPrice, newQuantity);
                            System.out.println("Item updated successfully!");
                            break;
                        }
                    }
                    if (!found) {
                        System.out.println("Item not found.");
                    }
                    break;
                case "4":
                    // Handle search case
                    System.out.println("Searching...");
                    // Call a method to search
                    break;
                case "5":
                    System.out.println("Exiting...");
                    return; // Exit the program
                default:
                    System.out.println("Invalid input. Please enter a valid option.");
                    break;
            }
        }
    }

    public static void printInventory(List<InventoryItem> inventory) {
        if (inventory.isEmpty()) {
            System.out.println("Inventory is empty.");
        } else {
            System.out.println("Inventory Items:");
            for (InventoryItem item : inventory) {
                System.out.println("Name: " + item.getName());
                System.out.println("Category: " + item.getCategory());
                System.out.println("Price: $" + item.getPrice());
                System.out.println("Quantity: " + item.getQuantity());
                System.out.println("-------------------------");
            }
        }
    }
}
